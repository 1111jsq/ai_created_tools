## 1. 准备工作

- [x] 1.1 阅读现有代码和规范，理解报告生成流程
- [x] 1.2 分析 `svg_generator` 模块的接口和使用方式
- [ ] 1.3 分析 `PPT` 模块的功能和导出能力（如需要）- 跳过，优先使用 SVG 生成器

## 2. 添加图片生成基础设施

- [x] 2.1 在 `report/main.py` 中添加图片生成相关的配置参数（如 `--enable-image-generation`）
- [x] 2.2 创建 `assets/` 子目录用于存储生成的图片
- [x] 2.3 添加图片生成失败时的降级处理逻辑（不影响报告正常生成）

## 3. 实现 LLM 图片判断功能

- [x] 3.1 设计 LLM 判断 prompt，识别报告中适合生成图片的内容
- [x] 3.2 实现 LLM 判断逻辑，返回 JSON 格式的判断结果（包含图片类型、描述、位置等）
- [x] 3.3 添加判断结果的验证和错误处理

## 4. 集成 SVG 生成器

- [x] 4.1 在 `report/main.py` 中导入并初始化 `svg_generator` 模块
- [x] 4.2 实现调用 `svg_generator` 生成 SVG 图片的功能
- [x] 4.3 将生成的 SVG 文件保存到报告的 `assets/` 目录
- [x] 4.4 在 Markdown 报告中插入图片引用（使用相对路径）

## 5. 实现信息提取和图片生成流程

- [x] 5.1 从报告数据中提取关键信息（统计数据、趋势、关系等）
- [x] 5.2 根据 LLM 判断结果，为每个需要生成的图片创建任务描述
- [x] 5.3 批量调用图片生成功能（考虑并发和错误处理）
- [x] 5.4 生成图片后，验证文件存在且有效

## 6. 集成到报告生成流程

- [x] 6.1 在 `write_report` 函数中，在生成 Markdown 前调用图片生成逻辑
- [x] 6.2 在 Markdown 生成过程中，在合适的位置插入图片引用
- [x] 6.3 确保图片生成不影响现有报告结构的完整性

## 7. 可选：集成 PPT 模块（如需要）

- [ ] 7.1 分析 PPT 模块的图表生成能力 - 暂不实施，优先使用 SVG
- [ ] 7.2 实现 PPT 图表导出为图片的功能（如 PNG/SVG） - 暂不实施
- [ ] 7.3 在图片生成逻辑中添加 PPT 选项 - 暂不实施

## 8. 测试和验证

- [ ] 8.1 测试图片生成功能（启用和禁用场景） - 待用户测试
- [ ] 8.2 测试 LLM 判断逻辑的正确性 - 待用户测试
- [ ] 8.3 测试图片生成失败时的降级处理 - 待用户测试
- [ ] 8.4 验证生成的 Markdown 报告中图片引用正确 - 待用户测试
- [ ] 8.5 验证报告在不同 Markdown 渲染器中的显示效果 - 待用户测试

## 9. 文档更新

- [x] 9.1 更新 `report/README.md`，说明图片生成功能的使用方法
- [x] 9.2 添加图片生成的配置示例
- [x] 9.3 更新项目文档，说明新增功能

